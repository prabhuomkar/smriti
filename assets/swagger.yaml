openapi: 3.0.3
info:
  title: Pensieve API
  description: Smarter Home for all your Photos and Videos
  version: 0.1.0
servers:
  - url: https://localhost:5000/api/
tags:
  - name: MediaItems
    description: Everything related to your Photos & Videos
  - name: Library
    description: Manage your collections of Photos & Videos
  - name: Explore
    description: Features on top of your MediaItems & Albums
  - name: Albums
    description: Collection of your Photos & Videos
  - name: Authentication
    description: Authentication for your application
  - name: User Management
    description: User Management for your application
paths:
  /v1/features:
    get:
      summary: Get list of enabled features
      description: Get list of enabled features
      operationId: getFeatures
      responses:
        '200':
          description: Success
        '500':
          description: Internal Server Error
  /v1/mediaItems:
    get:
      tags:
        - MediaItems
      summary: Get all existing mediaItems
      description: Get all existing mediaItems
      operationId: getMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    post:
      tags:
        - MediaItems
      summary: Upload a new mediaItem
      description: Upload a new mediaItem
      operationId: uploadMediaItem
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/mediaItems/{id}:
    get:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Get an existing mediaItem
      description: Get an existing mediaItem
      operationId: getMediaItem
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Update an existing mediaItem
      description: Update an existing mediaItem
      operationId: updateMediaItem
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    delete:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Delete an existing mediaItem
      description: Delete an existing mediaItem
      operationId: deleteMediaItem
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/mediaItems/{id}/places:
    get:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Get places from an existing mediaItem
      description: Get places from an existing mediaItem
      operationId: getMediaItemPlaces
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/mediaItems/{id}/things:
    get:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Get things from an existing mediaItem
      description: Get things from an existing mediaItem
      operationId: getMediaItemThings
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/mediaItems/{id}/people:
    get:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Get people from an existing mediaItem
      description: Get people from an existing mediaItem
      operationId: getMediaItemPeople
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/mediaItems/{id}/albums:
    get:
      tags:
        - MediaItems
      parameters:
        - name: id
          in: path
          description: ID of mediaItem
          required: true
          schema:
            type: string
            format: uuid
      summary: Get albums from an existing mediaItem
      description: Get albums from an existing mediaItem
      operationId: getMediaItemAlbums
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/favourites:
    get:
      tags:
        - Library
      summary: Get all favourite mediaItems
      description: Get all favourite mediaItems
      operationId: getFavouriteMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    post:
      tags:
        - Library
      summary: Add favourite mediaItems
      description: Add favourite mediaItems
      operationId: addFavouriteMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    delete:
      tags:
        - Library
      summary: Remove favourite mediaItems
      description: Remove favourite mediaItems
      operationId: removeFavouriteMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/hidden:
    get:
      tags:
        - Library
      summary: Get all hidden mediaItems
      description: Get all hidden mediaItems
      operationId: getHiddenMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    post:
      tags:
        - Library
      summary: Add hidden mediaItems
      description: Add hidden mediaItems
      operationId: addHiddenMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    delete:
      tags:
        - Library
      summary: Remove hidden mediaItems
      description: Remove hidden mediaItems
      operationId: removeHiddenMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/trash:
    get:
      tags:
        - Library
      summary: Get all deleted mediaItems
      description: Get all deleted mediaItems
      operationId: getDeletedMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    post:
      tags:
        - Library
      summary: Add deleted mediaItems
      description: Add deleted mediaItems
      operationId: addDeletedMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    delete:
      tags:
        - Library
      summary: Remove deleted mediaItems
      description: Remove deleted mediaItems
      operationId: removeDeletedMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/places:
    get:
      tags:
        - Explore
      summary: Get all place entities
      description: Get all place entities
      operationId: getPlaces
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/places/{id}/mediaItems:
    get:
      tags:
        - Explore
      parameters:
        - name: id
          in: path
          description: ID of place
          required: true
          schema:
            type: string
            format: uuid
      summary: Get mediaItems of a place entity
      description: Get mediaItems of a place entity
      operationId: getPlaceMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/things:
    get:
      tags:
        - Explore
      summary: Get all thing entities
      description: Get all thing entities
      operationId: getThings
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/things/{id}/mediaItems:
    get:
      tags:
        - Explore
      parameters:
        - name: id
          in: path
          description: ID of thing
          required: true
          schema:
            type: string
            format: uuid
      summary: Get mediaItems of a thing entity
      description: Get mediaItems of a thing entity
      operationId: getThingMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/people:
    get:
      tags:
        - Explore
      summary: Get all people entities
      description: Get all people entities
      operationId: getPeople
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/people/{id}:
    put:
      tags:
        - Explore
      parameters:
        - name: id
          in: path
          description: ID of people
          required: true
          schema:
            type: string
            format: uuid
      summary: Update a people entity
      description: Update a people entity
      operationId: updatePeople
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/explore/people/{id}/mediaItems:
    get:
      tags:
        - Explore
      parameters:
        - name: id
          in: path
          description: ID of people
          required: true
          schema:
            type: string
            format: uuid
      summary: Get mediaItems of a people entity
      description: Get mediaItems of a people entity
      operationId: getPeopleMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/explore/yearsAgo/{monthDate}/mediaItems:
    get:
      tags:
        - Explore
      parameters:
        - name: monthDate
          in: path
          description: Month and Date in MMYY format
          required: true
          schema:
            type: string
      summary: Get all mediaItems which are N years ago from given month & date
      description: Get all mediaItems which are N years ago from given month & date
      operationId: getYearsAgoMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/albums:
    get:
      tags:
        - Albums
      summary: Get all existing albums
      description: Get all existing albums
      operationId: getAlbums
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    post:
      tags:
        - Albums
      summary: Create a new album
      description: Create a new album
      operationId: createAlbum
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/albums/{id}:
    get:
      tags:
        - Albums
      parameters:
        - name: id
          in: path
          description: ID of album
          required: true
          schema:
            type: string
            format: uuid
      summary: Get an existing album
      description: Get an existing album
      operationId: getAlbum
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      tags:
        - Albums
      parameters:
        - name: id
          in: path
          description: ID of album
          required: true
          schema:
            type: string
            format: uuid
      summary: Update an existing album
      description: Update an existing album
      operationId: updateAlbum
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    delete:
      tags:
        - Albums
      parameters:
        - name: id
          in: path
          description: ID of album
          required: true
          schema:
            type: string
            format: uuid
      summary: Delete an existing album
      description: Delete an existing album
      operationId: deleteAlbum
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/albums/{id}/mediaItems:
    get:
      tags:
        - Albums
      parameters:
        - name: id
          in: path
          description: ID of album
          required: true
          schema:
            type: string
            format: uuid
      summary: Get mediaItems of an existing album
      description: Get mediaItems of an existing album
      operationId: getAlbumMediaItems
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    post:
      tags:
        - Albums
      parameters:
        - name: id
          in: path
          description: ID of album
          required: true
          schema:
            type: string
            format: uuid
      summary: Add mediaItems to an existing album
      description: Add mediaItems to an existing album
      operationId: addAlbumMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    delete:
      tags:
        - Albums
      parameters:
        - name: id
          in: path
          description: ID of album
          required: true
          schema:
            type: string
            format: uuid
      summary: Remove mediaItems from an existing album
      description: Remove mediaItems from an existing album
      operationId: removeAlbumMediaItems
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/auth/login:
    post:
      tags:
        - Authentication
      summary: User Login
      description: User Login
      operationId: authLogin
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/auth/refresh:
    post:
      tags:
        - Authentication
      summary: User Refresh Token
      description: User Refresh Token
      operationId: authRefresh
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/auth/logout:
    post:
      tags:
        - Authentication
      summary: User Logout
      description: User Logout
      operationId: authLogout
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
  /v1/users:
    get:
      tags:
        - User Management
      summary: Get all existing users
      description: Get all existing users
      operationId: getUsers
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
    post:
      tags:
        - User Management
      summary: Create a new user
      description: Create a new user
      operationId: createUser
      responses:
        '201':
          description: Created
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '500':
          description: Internal Server Error
  /v1/users/{id}:
    get:
      tags:
        - User Management
      parameters:
        - name: id
          in: path
          description: ID of user
          required: true
          schema:
            type: string
            format: uuid
      summary: Get an existing user
      description: Get an existing user
      operationId: getUser
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    put:
      tags:
        - User Management
      parameters:
        - name: id
          in: path
          description: ID of user
          required: true
          schema:
            type: string
            format: uuid
      summary: Update an existing user
      description: Update an existing user
      operationId: updateUser
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
    delete:
      tags:
        - User Management
      parameters:
        - name: id
          in: path
          description: ID of user
          required: true
          schema:
            type: string
            format: uuid
      summary: Delete an existing user
      description: Delete an existing user
      operationId: deleteUser
      responses:
        '204':
          description: No Content
        '400':
          description: Bad Request
        '401':
          description: Unauthenticated
        '404':
          description: Not Found
        '500':
          description: Internal Server Error
components:
  schemas:
    PhotoMetadata:
      type: object
      properties:
        cameraMake:
          type: string
          example: Apple
        cameraModel:
          type: string
          example: iPhone 12
        focalLength:
          type: string
          example: 5.49 mm
        apertureFNumber:
          type: string
          example: f/1.8
        isoEquivalent:
          type: string
          example: ISO758
        exposureTime:
          type: string
          example: 1/20
    VideoMetadata:
      type: object
      properties:
        cameraMake:
          type: string
          example: Apple
        cameraModel:
          type: string
          example: iPhone 12
        fps:
          type: string
          example: 60
    MediaItemMetadata:
      type: object
      properties:
        status:
          type: string
          enum: ["UNSPECIFIED", "PROCESSING", "READY", "FAILED"]
        type:
          type: string
          enum: ["photo", "video"]
        width:
          type: integer
          example: 1080
        height:
          type: integer
          example: 720
        creationTime:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        latitude:
          type: number
          example: 19.384982
        longitude:
          type: number
          example: -70.638324
        photo:
          $ref: '#/components/schemas/PhotoMetadata'
        video:
          $ref: '#/components/schemas/VideoMetadata'
    MediaItem:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        filename:
          type: string
          example: IMG_4942.jpg
        description:
          type: string
          example: Picture of a pizza from New York
        mimeType:
          type: string
          example: image/jpeg
        sourceUrl:
          type: string
          example: https://cdn.pensieve/source
        thumbnailUrl:
          type: string
          example: https://cdn.pensieve/thumbnail
        createdAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        updatedAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        mediaItemMetadata:
          $ref: '#/components/schemas/MediaItemMetadata'
    Album:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        name:
          type: string
          example: Jane's Wedding
        description:
          type: string
          example: Pictures from Wedding of Jane and Doe
        coverMediaItemId:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        createdAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        updatedAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        coverMediaItem:
          $ref: '#/components/schemas/MediaItem'
    Place:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        postcode:
          type: string
          example: 421201
        town:
          type: string
          example: Dallas
        city:
          type: string
          example: Mumbai
        state:
          type: string
          example: Washington
        country:
          type: string
          example: India
        coverMediaItemId:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        createdAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        updatedAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        coverMediaItem:
          $ref: '#/components/schemas/MediaItem'
    Thing:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        name:
          type: string
          example: Cars
        coverMediaItemId:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        createdAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        updatedAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        coverMediaItem:
          $ref: '#/components/schemas/MediaItem'
    People:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        name:
          type: string
          example: Cars
        coverMediaItemId:
          type: string
          format: uuid
          example: 102dc522de-1669-48a4-8270-4950a0237599
        createdAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        updatedAt:
          type: string
          format: date-time
          example: "2022-09-14T16:58:28Z"
        coverMediaItem:
          $ref: '#/components/schemas/MediaItem'